<!DOCTYPE html>
<head>
    <title>ch07요약</title>
    <style>
        ul{
            padding-left: 15px;
        }
        ol{
            padding-left: 15px;
        }
    
    </style>
</head>
<body>
    <h2>자바스크립트 코어 객체와 배열</h2><hr>
    <h3>객체란</h3>
    - 현실 세계는 객체들의 집합<br>
    
    <ul>&lt;자바스크립트 객체 구성&gt;
        <li>프로퍼티 : 객체의 고유한 속성(변수)</li>
        <li>메소드(method) : 함수</li>
    </ul>
    <ol>&lt;자바스크립트 객체 종류&gt;
        <li>코어 객체</li>
        <li>HTML DOM 객체</li>
        <li>브라우저 객체</li>
    </ol>
    1. 코어객체(기본으로 사용)
    <ul>
        <li>자바스크립트 언어가 실행되는 어디서나 사용 가능한 기본 객체</li>
        <li>기본 객체로 표준 객체</li>
        <li>Array, Date, String, Math 타입 등</li>
        <li>웹페이지 혹은 웹서버 응용프로그램 어디서나 사용 가능</li>
    </ul>
    - 코어 객체 종류: Array, Date, String, Math 등 <br>
    - 코어 객체 생성: new 키워드 이용, 객체 생성되면 객체 내부에 프로퍼티와 메소드들 존재 <br>
    - 객체 접근: 객체와 멤버 사이에 점(.)연산자 이용<br>

    2. HTML DOM객체
    <ul>
        <li>HTML 문서에 작성된 각 HTML 태그들을 객체화한 것들</li>
        <li>HTML 문서의 내용과 모양을 제어하기 위한 목적</li>
        <li>document객체의 하위 객체</li>
        <li>W3C의 표준 객체</li>
    </ul>

    3. 브라우저 객체
    <ul>
        <li>자바스크립트로 브라우저 제어를 위해 제공되는 객체</li>
        <li>BOM(Brower Object Model)에 따르는 객체들 : window, location, document 객체</li>
        <li>비표준 객체</li>
    </ul>

    <h3>자바스크립트 배열</h3>
    - 여러 개의 원소들을 연속적으로 저장 <br>
    - 전체를 하나의 단위로 다루는 데이터 구조 <br>
    - 0에서 시작하는 인덱스를 이용하여 배열의 각 원소 접근<br>
    &lt;배열 만드는 방법(2가지)&gt;<br>
    1. []로 배열 만들기<br>
    2. Array 객체로 배열 만들기<br>
    ex) <br>
    <script>
        let degrees = new Array(); // 빈 배열 생성
        degrees[0] = 15.1; degrees[1] = 15.4; degrees[2] = 16.1; degrees[3] = 17.5; degrees[4] = 19.2; degrees[5] = 21.4;
        let sum = 0; for(let i=0; i<degrees.length; i++)
        sum += degrees[i];
        document.write("평균 온도는 " + sum/degrees.length + "<br>");
    </script> 
    <br>
    - 배열의 특징: []로 생성해도 Array 객체로 다루어짐 <br>
    - 배열에 여러 타입의 데이터 섞여 저장 가능 <br>
    ex) Array 객체의 메소드 활용 <br>
    - concat, join(문자열), reverse, slice(start, end), sort, toString()(원소 사이에 ","넣어 문자열 생성) <br>

    <h3>Date 객체</h3>
    - 시간 정보를 담는 객체
    - 현재 시간 정보 (ex. let day = new Date(2022, 9, 2); //2022년 10월 2일) <br>

    ex) <br>
    <script>
        let now = new Date(); // 현재 시간 값을 가진 Date 객체 생성 
        document.write("현재 시간 : " + now.toUTCString() + "<br><hr>");
        document.write(now.getFullYear() + "년도<br>"); 
        document.write(now.getMonth() + 1 + "월<br>"); // 현재 월은 getMonth() + 1 
        document.write(now.getDate() + "일<br>"); 
        document.write(now.getHours() + "시<br>"); 
        document.write(now.getMinutes() + "분<br>"); 
        document.write(now.getSeconds() + "초<br>"); 
        document.write(now.getMilliseconds() + "밀리초<br><hr>");
        let next = new Date(2023, 7, 15, 12, 12, 12); // 7은 8월
        document.write("next.toLocaleString() : " + next.toLocaleString() + "<br>");
    </script>

    <div id="date"> ex) 시간에 따라 배경변경</div>
    <script>
        let current = new Date(); // 현재 시간을 가진 Date 객체 생성
        if(current.getSeconds() % 2 == 0)
            document.getElementById("date").style.backgroundColor = "violet"; 
        else
            document.getElementById("date").style.backgroundColor = "lightskyblue";

        document.write("현재 시간 : "); 
        document.write(current.getHours(), "시,"); 
        document.write(current.getMinutes(), "분,"); 
        document.write(current.getSeconds(), "초<br>");
    </script> 
    <h3>String 객체</h3>
    - 문자열을 담기 위한 객체(ex. let hello = new String("Hello");) <br>
    - 일단 생성되면 수정 불가능<br>
    - 문자열 길이(String 객체의 length 프로퍼티: 읽기 전용) <br>
    - 문자열을 배열처럼 사용([]연산자를 사용해 접근) <br>

    <h3>Math 객체</h3>
    - 수학 계산을 위한 프로퍼티와 메소드 제공 <br>
    - new Math()로 객체 생성하지 않고 사용 <br>
    - 난수 발생(Math.random()) <br>
    
    <script>
        function randomInt() {
        // 1~9의 십진 난수 리턴
            return Math.floor((Math.random()*9)+1); 
        }

        // 구구단 문제 생성 if(ans == user) // 정답과 사용자 입력 비교
        let ques = randomInt() + "*" + randomInt();
        let user = prompt("Math객체 예제" + ques + " 값은 얼마입니까?", 0);
        if(user == null) { // 취소 버튼이 클릭된 경우
            document.write("구구단 연습을 종료합니다");
        } 
        else {
            let ans = eval(ques); // 구구단 정답 계산 // 구구단 문제 생성 
            if(ans == user) // 정답과 사용자 입력 비교
                document.write("정답! ");
            // 사용자로부터 답 입력 
            else
                document.write("아니오! ");
                document.write(ques + "=" + "<strong>" + ans + "</strong>입니다<br>");
        } 
    </script>

    <h3>사용자 객체 만들기</h3>
    <ol>
        <li>직접 객체 생성 - new Object() 이용</li>
        <li>직접 객체 생성 -  리터럴 표기법 이용</li>
        <li>객체의 틀(프로토타입)을 만들고 객체 생성</li>
    </ol>

    - new Object() 이용 <br>
    1. new Object()로 빈 객체 생성 <br>
    2. 빈 객체에 프로퍼티 추가(프로퍼티 이름과 초기값 지정으로 새로운 프로퍼티 추가) <br>
    3. 빈 객체에 메소드 추가(메소드로 사용할 함수 미리 지정, 새 메소드 추가) <br><br>

    <strong>ex1. new Object()로 사용자 객체 만들기</strong><br>
    <script>
        //메소드로 사용할 3 개의 함수 작성
        function inquiry() { return this.balance; } // 잔금 조회
        function deposit(money) { this.balance += money; } // money 만큼 저금
        function withdraw(money) {  // 예금 인출, money는 인출하고자 하는 액수
            // money가 balance보다 작다고 가정
            this.balance -= money; 
            return money;
        }
        // 사용자 객체 만들기 
        let account  = new Object();
        account.owner = "object"; // 계좌 주인 프로퍼티 생성 및 초기화 <script>
        account.code = "111"; // 코드 프로퍼티 생성 및 초기화 // 객체 활용
        account.balance = 35000; // 잔액 프로퍼티 생성 및 초기화 
        document.write("account : "); 
        account.inquiry = inquiry; // 메소드 작성 
        document.write(account.owner + ", "); 
        account.deposit = deposit; // 메소드 작성 
        document.write(account.code + ", "); 
        account.withdraw = withdraw; // 메소드 작성
        document.write(account.balance + "<br>");
    </script> 

    <br>
    <strong>ex2. 리터럴 표기법으로 사용자 객체 만들기</strong><br>

    <script>
        //사용자 객체 만들기
        let account = {
            // 프로퍼티 생성 및 초기화
            owner : "리터럴", // 계좌 주인
            code : "111", // 계좌 코드
            balance : 35000, // 잔액 프로퍼티
            // 메소드 작성
            inquiry : function () { return this.balance; }, // 잔금 조회
            deposit : function(money) { this.balance += money; }, // 저금. money 만큼 저금
            withdraw : function (money) { 
                // 예금 인출, money는 인출하고자 하는 액수
                // money가 balance보다작다고가정
                this.balance -= money; 
                return money;
            }
        };
    </script>
    <script>
        // 객체 활용
        document.write("account : "); 
        document.write(account.owner + ", "); 
        document.write(account.code + ", "); 
        document.write(account.balance + "<br>");
        account.deposit(10000); // 10,000원 저금 
        document.write("10000원 저금 후 잔액은 " + account.inquiry() + "<br>"); 
        account.withdraw(5000); // 5,000원 인출 
        document.write("5000원 인출 후 잔액은 " + account.inquiry() + "<br>");
    </script>

    <br>
    <strong>ex3. Account 프로토타입 만들기</strong><br>

    <script>
        // 프로토타입 만들기 : 생성자 함수 작성
        function Account(owner, code, balance) {
            // 프로퍼티 만들기 
            this.owner = owner;  // 계좌 주인 프로퍼티 만들기
            this.code = code; // 계좌 코드 프로퍼티 만들기
            this.balance = balance; // 잔액 프로퍼티 만들기
            // 메소드 만들기
            this.inquiry = function () { return this.balance; } 
            this.deposit = function (money) { this.balance += money; }
            this.withdraw = function (money) { 
                // 예금 인출, money는 인출하는 액수
                // money가 balance보다 작다고 가정
                this.balance -= money;
                return money;
            }
        };
    </script>
    <script>
        // new 연산자 이용하여 계좌 객체 생성 
        let account_new = new Account("new", "111", 35000);
        // 객체 활용
        document.write("account : "); 
        document.write(account_new.owner + ", "); 
        document.write(account_new.code + ", "); 
        document.write(account_new.balance + "<br>");
        account_new.deposit(10000); // 10,000원 저금 
        document.write("10000원 저금 후 잔액은 " + account_new.inquiry() + "<br>"); 
        account_new.withdraw(5000); // 5,000원 인출 
        document.write("5000원 인출 후 잔액은 " + account_new.inquiry() + "<br>");
    </script>

    <h3>컴퓨팅 추상화</h3>
    <strong>ex1. 소, new object</strong><br>
    <script> 
        function give(feed) {
            this.feedbox += feed;
            document.write("feedbox:" + this.feedbox + "<br>"); 
        };
        
        function eat() {
            while(this.feedbox > 0) {
                if(this.stomach < 100) {
                    document.write("먹기 ");
                    this.feedbox -= 10; 
                    this.stomach += 10; 
                    document.write("feedbox:"+this.feedbox); 
                    document.write(", stomach:"+this.stomach); 
                    document.write("<br>");
                } else {
                    break; 
                }
            }
        };

        let cattle = new Object(); 
        cattle.stomach = 0; 
        cattle.feedbox = 0; 
        cattle.give = give; 
        cattle.eat = eat;
        cattle.give(70); 
        cattle.eat(); 
        cattle.give(50); 
        cattle.eat(); 
        cattle.give(50); 
        cattle.eat();
    </script>

    <br>
    <strong>ex2. 자동차, literal</strong><br>

    <script>
        let car = {
            speed : 0,
            oil : 0,

            brake : function(strong) { this.speed -= strong;},
            accel : function(strong) { this.speed += strong;},
            fill : function(oil) {
                this.oil += oil;
                document.getElementById("volume").innerHTML = "oil : " + car.oil;
            },
            drive : function() {
                if(this.speed > 0 && this.oil > 0) {
                    document.getElementById("volume").innerHTML = " Oil : " + this.oil; 
                    document.getElementById("carSpeed").innerHTML = ">>speed : "+this.speed;
                    this.speed -= 2; 
                    this.oil -= 2;
                } else {
                    document.getElementById("carSpeed").innerHTML = ">> STOP"; this.speed = 0;
                }
            }
        };

        function drive() {
            car.drive();
        } 
        setInterval(drive, 500); 
    </script>
    <form action="">
        <div id="volume"> Oil : 0</div>
        <input type="button" value="주유" id="oil" onclick="car.fill(50);"> 
        <p>
        <input type="button" value="브레이크" id="brake" onclick="car.brake(10);"> 
        <input type="button" value="엑셀" id="accel" onclick="car.accel(10)">
    </form> 
        <div id="carSpeed"> >> STOP</div>
        
    <br>
    <strong>ex3. 나무, prototype</strong><br>
    <script> 
        function tree() {
            this.humidity = 0; 
            this.sunshine = 0; 
            this.growth = 0;
            this.giveWater = function(water) { this.humidity += water;} 
            this.rainyDay = function(rain) { this.humidity += rain;}
            this.sunnyDay = function(sun) { this.humidity += sum;}
            this.view = function() {
                let growthText = ""; 
                if(this.sunshine>0 && this.humidity>0) {
                    this.growth += 1;
                    growthText = "성장 증가 : "; } 
                else {
                    this.growth -= 1;
                    growthText = "성장 감소 : ";
                } 
                if(this.sunshine>0) this.sunshine -= 1; 
                if(this.humidity>0) this.humidity -= 1;
                document.getElementById("sunHumi").innerHTML = "일조량:"; 
                document.getElementById("sunHumi").innerHTML += this.sunshine; 
                document.getElementById("sunHumi").innerHTML += ", 수분량:";
                document.getElementById("sunHumi").innerHTML += this.humidity; 
                document.getElementById("growth").innerHTML = growthText + this.growth;
            }

        }
        function display() { green.view();}
        let green = new tree();
        green.sunnyDay(10);
        green.rainyDay(5);
        setInterval(display, 1000);
    </script>

    <div id="sunHumi">일조량:0, 수분량:0</div> 
    <div id="growth">성장 증감 : 0</div>











    


    
    


</body>
</html>